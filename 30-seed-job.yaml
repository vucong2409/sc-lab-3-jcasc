jobs:
  - script: |
      folder('cd') {
        displayName("CD")
      }

      pipelineJob('cd/packer') {
        displayName("Packer CD")
        definition {
          cpsScm {
            scm {
              git {
                remote {
                  url('https://github.com/vucong2409/sc-lab-3-packer')
                  credentials('git-cred')
                }
                branch('*/main')
              }
            }
            lightweight()
          }
        }
      }

      pipelineJob('cd/terraform') {
        displayName("Terraform CD")
        definition {
          cpsScm {
            scm {
              git {
                remote {
                  url('https://github.com/vucong2409/sc-lab-3-iac')
                  credentials('git-cred')
                }
                branch('*/main')
              }
            }
            lightweight()
          }
        }
      }
